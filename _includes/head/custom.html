<!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- Custom CSS for Dark Mode -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<!-- Font Awesome Icons - Loaded Globally -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

<!-- Enhanced Blog Post Styles - only for blog posts -->
{% if page.layout == 'blog-post' %}
<link rel="stylesheet" href="{{ '/assets/css/blog-post-custom.css' | relative_url }}">
{% endif %}

<!-- Dark Mode Toggle Script -->
<script>
  // Function to toggle dark mode
  function toggleDarkMode() {
    const htmlElement = document.documentElement;
    htmlElement.classList.toggle('dark-theme');
    
    // Save preference to localStorage
    const isDarkMode = htmlElement.classList.contains('dark-theme');
    localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
  }

  // Function to initialize dark mode based on saved preference or system preference
  function initDarkMode() {
    // Check localStorage first
    const savedMode = localStorage.getItem('darkMode');
    
    if (savedMode === 'enabled') {
      document.documentElement.classList.add('dark-theme');
    } else if (savedMode === 'disabled') {
      document.documentElement.classList.remove('dark-theme');
    } else {
      // If no saved preference, check system preference
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark-theme');
      }
    }
  }

  // Run on page load
  document.addEventListener('DOMContentLoaded', function() {
    initDarkMode();
    
    // Add event listener to toggle button if it exists
    const darkToggle = document.getElementById('dark-mode-toggle');
    if (darkToggle) {
      darkToggle.addEventListener('click', toggleDarkMode);
    }
  });
</script>

<!-- Mathjax Support -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<!-- Enhanced Blog Post JavaScript - only for blog posts -->
{% if page.layout == 'blog-post' %}
<script defer src="{{ '/assets/js/blog-post-custom.js' | relative_url }}"></script>
{% endif %}

<!-- end custom head snippets -->
